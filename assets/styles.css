 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/index.html b/index.html
new file mode 100644
index 0000000000000000000000000000000000000000..3bc26728bdadc3afaf866ff0e0d4625da670825f
--- /dev/null
+++ b/index.html
@@ -0,0 +1,212 @@
+<!DOCTYPE html>
+<html lang="en">
+<head>
+    <meta charset="UTF-8">
+    <meta name="viewport" content="width=device-width, initial-scale=1.0">
+    <title>Middle School Teaching Console</title>
+    <script src="https://cdn.tailwindcss.com"></script>
+    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
+    <link rel="stylesheet" href="./assets/styles.css">
+</head>
+<body class="antialiased text-gray-900">
+    <header class="bg-gradient-to-r from-blue-600 via-sky-600 to-cyan-500 text-white shadow">
+        <div class="container mx-auto px-4 py-6 lg:px-12">
+            <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
+                <div>
+                    <p class="uppercase tracking-wider text-xs font-semibold text-blue-100">Teacher workspace</p>
+                    <h1 class="text-3xl lg:text-4xl font-bold mt-1">Middle School Gradebook &amp; Planning</h1>
+                    <p class="mt-2 text-blue-100 max-w-2xl">Manage your nine groups across 8th and 9th grade, capture marks in seconds, upload PDF rosters and time tables, and keep everything synced to Firebase.</p>
+                </div>
+                <div class="lg:text-right">
+                    <p class="text-sm text-blue-100">Signed in as</p>
+                    <p class="text-base lg:text-lg font-semibold bg-white/20 px-4 py-2 rounded inline-flex items-center gap-2">
+                        <span class="inline-flex h-2 w-2 rounded-full bg-emerald-300 animate-pulse"></span>
+                        <span id="userIdDisplay" class="font-mono">Loading...</span>
+                    </p>
+                </div>
+            </div>
+        </div>
+    </header>
+
+    <main class="container mx-auto max-w-7xl px-4 py-8 lg:px-12 lg:py-12 space-y-8">
+        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6">
+            <div class="card">
+                <h2 class="card-title">1. Select Class</h2>
+                <p class="card-subtitle">Choose the grade, then the group you want to work with. Your view and data will filter automatically.</p>
+                <div class="space-y-4">
+                    <div>
+                        <p class="label">Grade</p>
+                        <div class="flex flex-wrap gap-2">
+                            <button id="grade-8" data-grade="8" class="grade-tab tab-inactive">8th Grade (2ASCG)</button>
+                            <button id="grade-9" data-grade="9" class="grade-tab tab-inactive">9th Grade (3ASCG)</button>
+                        </div>
+                    </div>
+                    <div id="group-selector" class="space-y-2 hidden">
+                        <p class="label">Group</p>
+                        <div class="flex flex-wrap gap-2" id="group-buttons-container">
+                            <button data-group="1" class="group-tab tab-inactive">Group 1</button>
+                            <button data-group="2" class="group-tab tab-inactive">Group 2</button>
+                            <button data-group="3" class="group-tab tab-inactive">Group 3</button>
+                            <button data-group="4" class="group-tab tab-inactive">Group 4</button>
+                            <button id="group-5-btn" data-group="5" class="group-tab tab-inactive">Group 5</button>
+                        </div>
+                    </div>
+                </div>
+            </div>
+
+            <div class="card lg:col-span-2">
+                <h2 class="card-title">2. Data Sources</h2>
+                <p class="card-subtitle">Bring in your official student rosters and time tables from PDF, or populate the database with the prepared dataset.</p>
+                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
+                    <button id="batch-upload-btn" class="accent-button">
+                        Upload the full 313-student dataset
+                    </button>
+                    <label class="accent-outline-button" for="student-pdf-input">
+                        <span class="font-semibold block">Upload student PDF</span>
+                        <span class="text-sm opacity-80">Extract names, IDs and assign to the active class.</span>
+                    </label>
+                    <input type="file" id="student-pdf-input" accept="application/pdf" class="hidden">
+                    <label class="accent-outline-button" for="timetable-pdf-input">
+                        <span class="font-semibold block">Upload time table PDF</span>
+                        <span class="text-sm opacity-80">Store schedule documents per grade/group for quick access.</span>
+                    </label>
+                    <input type="file" id="timetable-pdf-input" accept="application/pdf" class="hidden">
+                </div>
+                <div id="pdf-upload-progress" class="mt-4 hidden">
+                    <p class="text-sm font-medium text-gray-600">Processing PDF…</p>
+                    <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden mt-2">
+                        <div class="h-full bg-blue-500 animate-progress"></div>
+                    </div>
+                </div>
+            </div>
+        </section>
+
+        <section id="pdf-preview-section" class="card hidden">
+            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
+                <div>
+                    <h2 class="card-title">PDF extraction preview</h2>
+                    <p class="card-subtitle">Review the extracted student list. Confirm to merge them into the active class roster.</p>
+                </div>
+                <div class="flex gap-2">
+                    <button id="pdf-clear-btn" class="ghost-button">Discard</button>
+                    <button id="pdf-import-btn" class="accent-button">Import extracted students</button>
+                </div>
+            </div>
+            <div class="mt-4 overflow-x-auto">
+                <table class="data-table">
+                    <thead>
+                        <tr>
+                            <th>Name</th>
+                            <th>Student ID</th>
+                        </tr>
+                    </thead>
+                    <tbody id="pdf-preview-body">
+                    </tbody>
+                </table>
+            </div>
+        </section>
+
+        <section id="content-area" class="space-y-8 hidden">
+            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
+                <div class="card">
+                    <h2 class="card-title">Add student manually</h2>
+                    <p class="card-subtitle">Perfect for late arrivals or corrections. New students inherit the default mark template.</p>
+                    <form id="add-student-form" class="mt-4 space-y-4">
+                        <div>
+                            <label for="student-name" class="label">Student name (الاسم + النسب)</label>
+                            <input type="text" id="student-name" name="student-name" required class="input" placeholder="مثال: محمد حميش">
+                        </div>
+                        <div>
+                            <label for="student-id" class="label">Student ID (الرمز)</label>
+                            <input type="text" id="student-id" name="student-id" required class="input" placeholder="A170035490">
+                        </div>
+                        <button type="submit" class="accent-button w-full">Add student</button>
+                    </form>
+                </div>
+
+                <div class="card">
+                    <h2 class="card-title">Class resources</h2>
+                    <div class="space-y-6 mt-4">
+                        <div>
+                            <h3 class="section-heading">Time tables</h3>
+                            <p class="card-subtitle">Uploaded PDF time tables for this group. Click to download.</p>
+                            <ul id="timetable-list" class="divide-y divide-gray-200 mt-3"></ul>
+                            <p id="timetable-empty" class="text-sm text-gray-500">No time table uploaded yet.</p>
+                        </div>
+                        <div>
+                            <h3 class="section-heading">Lesson notebook</h3>
+                            <p class="card-subtitle">Keep quick notes on what you covered, homework reminders or discipline incidents.</p>
+                            <form id="lesson-note-form" class="space-y-3">
+                                <textarea id="lesson-note-input" class="input resize-y h-32" placeholder="Lesson summary, homework assigned, reminders..."></textarea>
+                                <div class="flex items-center justify-end gap-2">
+                                    <button type="button" id="lesson-note-reset" class="ghost-button">Clear</button>
+                                    <button type="submit" class="accent-outline-button">Save note</button>
+                                </div>
+                            </form>
+                            <p id="lesson-note-status" class="text-xs text-gray-500"></p>
+                        </div>
+                    </div>
+                </div>
+            </div>
+
+            <section class="card">
+                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
+                    <div>
+                        <h2 id="table-title" class="card-title">Student list</h2>
+                        <p class="card-subtitle">Type directly into the cells to update marks. Everything syncs to Firestore instantly.</p>
+                    </div>
+                    <button id="export-csv-btn" class="ghost-button">Export CSV</button>
+                </div>
+                <div class="mt-6 overflow-x-auto">
+                    <table class="gradebook-table">
+                        <thead>
+                            <tr>
+                                <th class="sticky-col">Student name</th>
+                                <th>Student ID</th>
+                                <th>Quiz 1<br><span>(/10)</span></th>
+                                <th>Quiz 2<br><span>(/10)</span></th>
+                                <th>Participation<br><span>(/5)</span></th>
+                                <th>Homework<br><span>(/5)</span></th>
+                                <th>Copybook<br><span>(/5)</span></th>
+                                <th>Discipline<br><span>(/5)</span></th>
+                                <th>Final<br><span>(/20)</span></th>
+                                <th>Observations</th>
+                                <th>Actions</th>
+                            </tr>
+                        </thead>
+                        <tbody id="gradebook-body">
+                            <tr>
+                                <td colspan="11" class="placeholder" id="loading-placeholder">Choose a grade and group to load students.</td>
+                            </tr>
+                        </tbody>
+                    </table>
+                </div>
+            </section>
+        </section>
+    </main>
+
+    <!-- Notification modal -->
+    <div id="notification-modal" class="modal hidden" role="dialog" aria-modal="true">
+        <div class="modal-content">
+            <h3 id="notification-title" class="modal-title">Notice</h3>
+            <p id="notification-message" class="modal-message">Something happened.</p>
+            <button id="notification-ok-btn" class="accent-button w-full mt-6">OK</button>
+        </div>
+    </div>
+
+    <!-- Confirmation modal -->
+    <div id="confirmation-modal" class="modal hidden" role="dialog" aria-modal="true">
+        <div class="modal-content">
+            <h3 id="confirmation-title" class="modal-title">Are you sure?</h3>
+            <p id="confirmation-message" class="modal-message">Do you really want to do this?</p>
+            <div class="grid grid-cols-2 gap-3 mt-6">
+                <button id="confirmation-cancel-btn" class="ghost-button">Cancel</button>
+                <button id="confirmation-confirm-btn" class="accent-button">Confirm</button>
+            </div>
+        </div>
+    </div>
+
+    <script src="./config.js"></script>
+    <script type="module" src="./src/app.js"></script>
+</body>
+</html>
 
EOF
)
